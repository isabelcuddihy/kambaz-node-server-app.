import { v4 as uuidv4 } from "uuid";
import model from "./model.js";
import enrollmentModel from "../Enrollments/model.js";
export default function CoursesDao() {
function findAllCourses() {
 return model.find({}, { name: 1, description: 1 });
}

  async function findCoursesForEnrolledUser(userId) {
    const enrollments = await enrollmentModel.find({ user: userId }).populate("course");
    return enrollments.map((enrollment) => enrollment.course);
  }

  function createCourse(course) {
    return model.create(course);
  }
 function deleteCourse(courseId) {
   return model.deleteOne({ _id: courseId });
 }


function updateCourse(courseId, courseUpdates) {
 return model.updateOne({ _id: courseId }, { $set: courseUpdates })};

  return { findAllCourses,findCoursesForEnrolledUser, createCourse, deleteCourse, updateCourse, }};

